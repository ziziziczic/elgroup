<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- fontawesome -->
    <script src="https://kit.fontawesome.com/12530f3a2e.js" crossorigin="anonymous"></script>
    <style>
        :root {
            --black:#1a1a1a;
            --white:#fff;
            --gray:#ccc;
            --darkgreen:#18846c;
            --lightgreen:antiquewhite;
            --darkblack:rgba(0,0,0,.8);
            --minRangeValue:280px;
        }
        *{margin:0; padding:0; outline:none; border:none;}
        button{cursor: pointer; background: none;}
        img{display: block; max-width:100%; height: auto;}
        ol,ul{list-style:none;}
        a{color:inherit;}
        body{margin: 50px 0; color:var(--black); font:1rem/1.3 sans-serif;}
        .gallery{padding:0 2rem;}
        .container{max-width:960px; margin:0 auto;}
        .d-none{display: none;}

        /* toolbar
        -------------------------------------------------------------*/
        .toolbar{display: flex; justify-content: space-between; align-items: center; padding-bottom: 50px;}
        .view-options{display: flex; align-items: center;}
        .view-options li:not(:last-child) {margin-right:1.2rem;}
        .view-options button{padding:2px; border:3px solid transparent;}
        .view-options .active button{border-color: var(--darkgreen);}

        /* image-list
        -------------------------------------------------------------*/
        .image-list {margin-bottom: 3rem;}
        .image-list li {background:lightcoral; color:var(--darkblack);}
        .image-list li p:first-child{font-weight: bold; font-size: 1.15rem;}
        .image-list li p:last-child{margin-top: .5rem;}
        
        /* grid-view
        --------------------------------------------------------------*/
        .grid-view{display:grid; grid-gap:2rem; grid-template-columns: repeat(auto-fit, minmax(var(--minRangeValue),1fr));}

        /* list-view
        ----------------------------------------------------------------*/
        .list-view li+li{margin-top: 1.5rem;}
        .list-view figure{display: grid; grid-gap:1.5rem; grid-template-columns: 150px 1fr; align-items: center;}
        
        /* MQ
        --------------------------------------------------------------*/
        @media screen and (max-width:900px) {
            .toolbar input[type='range'] {display:none;}
        }
    </style>
</head>
<body>
    <section class="gallery">
        <div class="container">
            <div class="toolbar">
                <div class="search-wrapper">
                    <input type="search" placeholder="Search for photos">
                    <div class="counter">
                        Total photos: <span>12</span>
                    </div>
                </div>
                <ul class="view-options">
                    <li class="zoom d-none">
                        <input type="range" min="180" max="380" value="280" list="tickmarks">
                        <datalist id="tickmarks">
                            <option value="180" label="180"></option>
                            <option value="200"></option>
                            <option value="220"></option>
                            <option value="240"></option>
                            <option value="260"></option>
                            <option value="280" label="280"></option>
                            <option value="300"></option>
                            <option value="320"></option>
                            <option value="340"></option>
                            <option value="360"></option>
                            <option value="380" label="380"></option>
                        </datalist>
                    </li>
                    <li class="show-grid">
                        <button>
                            <i class="fas fa-th"></i>
                        </button>
                    </li>
                    <li class="show-list active">
                        <button>
                            <i class="fas fa-list"></i>
                        </button>
                    </li>
                </ul>
            </div>
            <ol class="image-list list-view">
                <li>
                    <figure>
                        <img src="https://cdn.pixabay.com/photo/2021/02/17/12/04/winter-6024017_960_720.jpg" alt="">
                        <figcaption>
                            <p>green people tree winter</p>
                            <p>free photo</p>
                        </figcaption>
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://cdn.pixabay.com/photo/2020/08/17/18/38/cat-5496162_960_720.jpg" alt="">
                        <figcaption>
                            <p>pretty cat animal</p>
                            <p>free photo</p>
                        </figcaption>
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://cdn.pixabay.com/photo/2021/02/05/01/22/man-5983064_960_720.jpg" alt="">
                        <figcaption>
                            <p>people moutain climing</p>
                            <p>free photo</p>
                        </figcaption>
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://cdn.pixabay.com/photo/2021/02/10/08/44/columbine-6001350_960_720.jpg" alt="">
                        <figcaption>
                            <p>yellow flower</p>
                            <p>free photo</p>
                        </figcaption>
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://cdn.pixabay.com/photo/2021/01/27/22/25/rabbit-5956422_960_720.jpg" alt="">
                        <figcaption>
                            <p>green animal rabbit</p>
                            <p>free photo</p>
                        </figcaption>
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://cdn.pixabay.com/photo/2018/05/12/03/18/love-3392348_960_720.jpg" alt="">
                        <figcaption>
                            <p>people sunset</p>
                            <p>free photo</p>
                        </figcaption>
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://cdn.pixabay.com/photo/2020/12/15/18/55/grass-5834596_960_720.jpg" alt="">
                        <figcaption>
                            <p>green grass sea</p>
                            <p>free photo</p>
                        </figcaption>
                    </figure>
                </li>
                <li>
                    <figure>
                        <img src="https://cdn.pixabay.com/photo/2021/02/17/12/04/winter-6024017_960_720.jpg" alt="">
                        <figcaption>
                            <p>green people tree winter</p>
                            <p>free photo</p>
                        </figcaption>
                    </figure>
                </li>
        </div>
    </section>
    <script>
        const imageList = document.querySelector('.image-list');
        const imageListItems = document.querySelectorAll('.image-list li');
        const btns = document.querySelectorAll('.view-options button');
        const active = 'active';
        const listView = 'list-view';
        const gridView = 'grid-view';
        const dNone='d-none';

        function btnFc(){
                const parent = this.parentElement;
                document.querySelector('.view-options .active').classList.remove(active);
                parent.classList.add(active);

                if(parent.classList.contains('show-list')){
                    parent.previousElementSibling.previousElementSibling.classList.add(dNone);
                    imageList.classList.remove(gridView);
                    imageList.classList.add(listView);
                }else{
                    parent.previousElementSibling.classList.remove(dNone);
                    imageList.classList.remove(listView);
                    imageList.classList.add(gridView);
                }
            }

        // button 활성화
        // for(const btn of btns){
        //     btn.addEventListener('click',btnFc);
        // }
        btns.forEach((btn)=>{btn.addEventListener('click',btnFc)});

        // 리스트 너비 조절 range
        const rangeInput = document.querySelector("input[type='range']");
        rangeInput.addEventListener('input',function(){
            document.documentElement.style.setProperty('--minRangeValue',`${this.value}px`);
        });

        // search 검색어
        const captions = document.querySelectorAll(".image-list figcaption p:first-child");
        const myArray = [];
        let counter = 1; 
        for (const caption of captions){
            myArray.push({
                id:counter++,
                text:caption.textContent
            });
        }

        console.log(myArray);

        const searchInput = document.querySelector('input[type="search"]');
        const photosCounter = document.querySelector('.toolbar .counter span');

        function keyupHandler(){
            for(const item of imageListItems){
                item.classList.add(dNone);
            }
            const keywords = this.value;

            const filteredArray = myArray.filter( el => el.text.toLowerCase().includes(keywords.toLowerCase()));
            console.log(filteredArray);

            if(filteredArray.length > 0 ){
                for(const el of filteredArray){
                    document.querySelector(`.image-list li:nth-child(${el.id})`).classList.remove(dNone);
                }
            }
            photosCounter.textContent = filteredArray.length;
        }

        searchInput.addEventListener("keyup",keyupHandler);
        //keydown, keypress

    </script>
</body>
</html>